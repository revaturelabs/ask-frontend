<div class="container-fluid">
  <ul class="nav">
    <li class="nav-item">
    </li>
    <li class="nav-item">
      <button class="btn btn-success" (click)="editMode()">{{editModeText}} &rarr;</button>
      <br>
      <button *ngIf="!this.authService.account.expert && inEditMode" class="btn btn-success" (click)="addInterest()"
        (click)="openLg(content)">{{interestModeText}} &rarr;</button>
    </li>
  </ul>
  <div class="row">
    <h2 *ngIf="!this.authService.account.expert">Associate</h2>
    <h2 *ngIf="this.authService.account.expert">Expert</h2>
  </div>
  <div class="row">
    <div class="col-md-4">
      <img class="profilePic" src="http://placekitten.com/g/200/300" alt="bianca !<3s cats">
      <!-- <img class="profilePic" src={{user.profilePic}}> -->
      <div class="centered">
        <input type="file" accept="image/*" (change)="onFileChange($event)" *ngIf=inEditMode>
      </div>
    </div>
    <div class="col-md-8">
      <form>
        <div class="form-group">
          <label for="profileInputUsername">Username: </label>
          <span> {{user.username}}</span>
          <input type="username" class="form-control" id="profileInputUsername" placeholder="New Username"
            *ngIf=inEditMode>
        </div>
        <div class="form-group">
          <label for="profileInputEmail">Email: </label>
          <span> {{user.email}}</span>
          <input type="email" class="form-control" id="profileInputEmail" placeholder="New Email" *ngIf=inEditMode>
        </div>
        <div class="form-group">
          <label for="profileInputBio"></label>
          <span> {{user.bio}}</span>
          <input type="textarea" class="form-control" id="profileInputBio" placeholder="Bio" *ngIf=inEditMode>
        </div>
      </form>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <!-- Being able to add Tags should go here-->
        <!--
        <form>
          <div class="form-group users-profile-interests" *ngIf="inEditMode">
            <input type="email" class="form-control" id="userProfile" placeholder="Interests">
            <button type="submit" class="btn btn-primary">Add</button>
          </div>
        </form>
        -->
      </div>
    </div>
    <mat-chip-list>
      <h2 *ngIf="!this.authService.account.expert">Interests</h2>
      <h2 *ngIf="this.authService.account.expert">Skills</h2>
      <div *ngFor="let tag of this.authService.user.expertTags">
        <mat-chip class="chip">
          {{ tag.name }}
        </mat-chip>
      </div>
    </mat-chip-list>
    <div *ngIf="this.authService.user.questions.length > 0">
      <app-user-questions></app-user-questions>
    </div>
    <div *ngIf="this.authService.user.responses.length > 0">
      <app-expert-questions></app-expert-questions>
    </div>
    <div *ngIf="this.authService.user.responses.length > 0">
      <div *ngFor="let response of this.authService.user.responses">
        <p>{{ response.body }}</p>
        <p>{{ response.creationDate }}</p>
      </div>
    </div>
  </div>
</div>

<ng-template #content let-modal>
  <div *ngIf="this.inInterestMode">
    <button id="close-tab" type="button" class="close float-sm-right" aria-label="Close"
      (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
    <mat-card>
      <mat-card-header>
        <mat-card-title>
          <h3 class="modal-title">What Are Your Interests?</h3>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div *ngFor="let tag of tags">
          <section class="skill-tag">
            <mat-checkbox color="warn" (change)="toggle($event, tag.name)" id="{{ tag.name }}" [checked]="tag.checked"
              matTooltip="{{ tag.name }}" [matTooltipPosition]="'above'" [matTooltipShowDelay]="300"
              [matTooltipHideDelay]="100">
              {{ tag.name }}</mat-checkbox>
          </section>
        </div>
        <div class="button-div">
          <button id="saveButton" mat-raised-button (click)="onSubmit(); modal.dismiss('Cross click')">
            Update Tags
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</ng-template>